import{a as dt,b as ct}from"./chunk-T6ZPR3DN.js";import{a as nt,c as v}from"./chunk-QYNFAZMW.js";import{a as X}from"./chunk-SWGVYQEU.js";import{c as C,d as _,f as ot,i as at,j as pt,k as mt,l as D,m as N,n as st,o as w}from"./chunk-3QVV65MX.js";import{a as y}from"./chunk-6HNA5C5M.js";import{a as lt}from"./chunk-55I3TAXT.js";import{a as rt}from"./chunk-2LHNZLNA.js";import{d as Z,g as $,j as tt,q as et,r as it}from"./chunk-U2BK7JJZ.js";import{a as Q}from"./chunk-GAJDQISX.js";import{a as O}from"./chunk-S3AX5MZX.js";import{$b as J,Ba as m,Ca as b,Eb as F,Fb as H,Gb as R,Ib as Y,Na as W,Pa as E,Ra as d,Tb as q,Ya as i,Za as e,_a as c,_b as G,a as g,aa as U,ba as f,fb as x,fc as K,ia as V,j,ja as z,pa as k,qb as I,rb as p,sb as P,sc as A,tb as h,wb as S,x as L,xb as T,yb as M}from"./chunk-6K2CLVX4.js";var ut=(()=>{let t=class t{constructor(o){this.http=o}importVia(o){return this.http.post(`${O.apiUrl}/product-detail`,o)}getHistoryTransaction(o){let a=o?g({},o):void 0;return this.http.get(`${O.apiUrl}/product-detail/history-transaction`,{params:a})}};t.\u0275fac=function(a){return new(a||t)(k(K))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();function zt(r,t){if(r&1&&c(0,"nz-option",35),r&2){let u=t.$implicit;d("nzValue",u.id)("nzLabel",u.title)}}function bt(r,t){if(r&1&&(i(0,"tr")(1,"td",32),p(2),F(3,"date"),e(),i(4,"td",32),p(5),e(),i(6,"td",32),p(7),e()()),r&2){let u=t.$implicit;m(2),h(" ",R(3,3,+u.createdAt*1e3,"dd-MM-YYYY HH:mm:ss "),""),m(3),P(u.productTitle),m(2),P(u.quantity)}}function Et(r,t){r&1&&(i(0,"div"),p(1,"Th\xF4ng s\u1ED1 h\u1EC7 th\u1ED1ng. N\u1EBFu trong qu\xE1 tr\xECnh import b\u1ECB l\u1ED7i do c\xE1c th\xF4ng s\u1ED1 d\u01B0\u1EDBi th\xEC vui l\xF2ng li\xEAn h\u1EC7 nh\xE0 cung c\u1EA5p hosting \u0111\u1EC3 t\u0103ng limit"),e(),i(2,"div"),p(3,"max_execution_time: 30s"),e(),i(4,"div"),p(5," post_max_size: 32M"),e())}var ht=(()=>{let t=class t extends Q{constructor(o,a,n){super(),this.productService=o,this.service=a,this.toast=n,this.importData="",this.productId=0,this.listUpdated=[],this.listNew="",this.totalLine=0,this.failNumber=0,this.newNumber=0,this.updateNumber=0,this.products=new j,this.historyUps=[],this.current=1,this.reasons=ct,this.listOfData=dt}ngOnInit(){this.getProduct(),this.getProductDetail()}getProduct(){this.products=this.productService.getProducts().pipe(L(o=>o.data))}importVia(){let o=this.importData.trim().replaceAll("	","");if(!this.productId){this.toast.error("Vui l\xF2ng ch\u1ECDn lo\u1EA1i");return}if(!o){this.toast.error("Vui l\xF2ng Nh\u1EADp danh s\xE1ch via/ clone/ bm ");return}let a={productId:this.productId,lstInfo:[...new Set(o.split(`
`))]};console.log(a);let n=this.service.importVia(a).subscribe({next:s=>{this.listNew=s.lstNewProduct.join(`
`),this.newNumber=s.lstNewProduct.length,this.listUpdated=s.listUpdateProduct.join(`
`),this.updateNumber=s.listUpdateProduct.length,this.totalLine=s.totalLine,this.failNumber=s.failNumber}});this.subscriptions.push(n)}getProductDetail(o){let a=this.service.getHistoryTransaction(o).subscribe({next:n=>{this.historyUps=n.data,this.setPagination(g({},n))}});this.subscriptions.push(a)}pageChange(o){let a={take:10,page:o};this.getProductDetail(a)}};t.\u0275fac=function(a){return new(a||t)(b(lt),b(ut),b(X))},t.\u0275cmp=U({type:t,selectors:[["app-import-product-details"]],features:[W],decls:60,vars:19,consts:[[1,"wrapper"],[1,"wrapper__import","bg-white"],[1,"wrapper__import__header","header1"],[1,"wrapper__import__content","p-3"],["nzType","warning",3,"nzDescription"],[1,"mt-3"],["nzType","warning","nzDescription","L\u01B0u \xFD ch\u1ECDn lo\u1EA1i tr\u01B0\u1EDBc khi import"],["nzShowSearch","","nzPlaceHolder","Ch\u1ECDn lo\u1EA1i",1,"mt-3",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"fw-medium",2,"font-size","1rem"],["rows","7","nz-input","",3,"ngModel","ngModelChange"],[1,"wrapper__import__content--buttons","text-center"],[1,"wrapper__import__content--buttons-first"],[1,"btn","btn-primary","text-white",2,"border-radius","15px",3,"click"],[1,"fa","fa-rocket","mr-1"],[1,"wrapper__import__content--buttons-second","mt-3"],[1,"btn","btn-primary","text-white","me-2",2,"border-radius","15px"],[1,"btn","btn-success","text-white","me-2",2,"border-radius","15px"],[1,"btn","btn-warning","text-white","me-2",2,"border-radius","15px"],[1,"btn","btn-danger","text-white",2,"border-radius","15px"],[1,"row","mt-3"],[1,"col-md-6","col-sm-12","left"],[1,"text-success"],["rows","7","nz-input","",3,"disabled","value"],[1,"col-md-6","col-sm-12","right"],[1,"text-warning"],[1,"wrapper__history","mt-4"],[1,"wrapper__history__header","header1"],[1,"wrapper__history__content","bg-white","p-3"],[3,"nzFrontPagination","nzTotal","nzPageSize","nzPageIndex","nzData","nzPageIndexChange"],["basicTable",""],["nzAlign","center"],[4,"ngFor","ngForOf"],["messageWarning",""],[3,"nzValue","nzLabel"]],template:function(a,n){if(a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),p(4,"Import nguy\xEAn li\u1EC7u b\xE1n "),e()(),i(5,"div",3)(6,"div"),c(7,"nz-alert",4),e(),i(8,"div",5),c(9,"nz-alert",6),e(),i(10,"nz-select",7),M("ngModelChange",function(l){return T(n.productId,l)||(n.productId=l),l}),E(11,zt,1,2,"nz-option",8),F(12,"async"),e(),i(13,"div",9)(14,"p",10),p(15,"Nh\u1EADp danh s\xE1ch via/ clone/ bm"),e(),i(16,"nz-form-item")(17,"textarea",11),M("ngModelChange",function(l){return T(n.importData,l)||(n.importData=l),l}),e()()(),i(18,"div",12)(19,"div",13)(20,"button",14),x("click",function(){return n.importVia()}),c(21,"i",15),p(22," IMPORT"),e()(),i(23,"div",16)(24,"button",17),p(25),e(),i(26,"button",18),p(27),e(),i(28,"button",19),p(29),e(),i(30,"button",20),p(31," L\u1ED7i: 0 "),e()()(),i(32,"div",21)(33,"div",22)(34,"p",23),p(35,"Danh s\xE1ch Th\xEAm m\u1EDBi"),e(),c(36,"textarea",24),e(),i(37,"div",25)(38,"p",26),p(39,"Danh s\xE1ch Update"),e(),c(40,"textarea",24),e()()()(),i(41,"div",27)(42,"div",28)(43,"h2"),p(44,"L\u1ECBch s\u1EED up h\xE0ng "),e()(),i(45,"div",29)(46,"nz-table",30,31),x("nzPageIndexChange",function(l){return n.pageChange(l)}),i(48,"thead")(49,"tr")(50,"th",32),p(51,"Th\u1EDDi gian"),e(),i(52,"th",32),p(53,"Name"),e(),i(54,"th",32),p(55,"S\u1ED1 l\u01B0\u1EE3ng"),e()()(),i(56,"tbody"),E(57,bt,8,6,"tr",33),e()()()()(),E(58,Et,6,0,"ng-template",null,34,Y)),a&2){let s=I(47),l=I(59);m(7),d("nzDescription",l),m(3),S("ngModel",n.productId),m(),d("ngForOf",H(12,17,n.products)),m(6),S("ngModel",n.importData),m(8),h(" T\u1ED5ng: ",n.totalLine," "),m(2),h(" Th\xEAm m\u1EDBi: ",n.newNumber," "),m(2),h(" Update: ",n.updateNumber," "),m(7),d("disabled",!0)("value",n.listNew),m(4),d("disabled",!0)("value",n.listUpdated),m(6),d("nzFrontPagination",!1)("nzTotal",n.totalRecord)("nzPageSize",n.limit)("nzPageIndex",n.currentPage)("nzData",n.historyUps),m(11),d("ngForOf",s.data)}},dependencies:[y,Z,$,tt,q,C,_,rt,v,nt,mt,at,N,D,pt,w,st,G,J],styles:[".wrapper[_ngcontent-%COMP%]{overflow:auto;height:100%}nz-select[_ngcontent-%COMP%]{width:50%}.wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]});let r=t;return r})();var vt=[{path:"",component:ht}],gt=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=f({type:t}),t.\u0275inj=z({imports:[A.forChild(vt),A]});let r=t;return r})();var ie=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=f({type:t}),t.\u0275inj=z({imports:[gt,y,et,C,_,it,v,N,D,w,ot]});let r=t;return r})();export{ie as a};
